---
title: Laboratorio de Seguridad: Reconocimiento y Armamento
date: 2024-10-10 23:21:00 -05:00
categories: [VIRTUAL MACHINE]
tags: [Nmap, GitHub]  # TAG names should always be lowercase
---

# Laboratorio de Seguridad: Reconocimiento y Armamento

## Reconnaissance: Profundizamos en el escaneo con Nmap

### Descripción de la etapa
En esta fase, utilizamos Nmap para identificar servicios y sistemas en la red, lo cual es esencial para delinear las superficies de ataque posibles.

#### Preguntas y Respuestas

1. **¿Por qué debemos ejecutar nmap con privilegios de root?**

   Ejecutar Nmap con privilegios de root permite realizar escaneos SYN, que son rápidos y discretos, ya que sólo envían paquetes SYN sin completar el handshake TCP.

2. **¿Qué significan los flags -sS, -sT, -sV, -O en el escaneo de nmap?**

   - `-sS`: Escaneo SYN, envía solo paquetes SYN.
   - `-sT`: Escaneo de conexión completa, establece conexiones TCP completas.
   - `-sV`: Detección de versiones de servicios activos.
   - `-O`: Detección del sistema operativo mediante análisis de paquetes.

3. **¿Existe algún flag que permite hacer un escaneo involucrando todos los flags mencionados anteriormente?**

   No hay un único flag; se deben combinar los flags manualmente para realizar un escaneo completo con todas esas características.

4. **Explicar el proceso de un handshake TCP.**

   El handshake TCP es un mecanismo de establecimiento de conexión:
   - **SYN**: El cliente envía un paquete SYN al servidor.
   - **SYN-ACK**: El servidor responde con SYN-ACK.
   - **ACK**: El cliente responde con ACK, completando la conexión.

5. **Según la pregunta anterior, ¿qué significa el flag -sS?**

   `-sS` realiza un escaneo SYN, enviando solo el paquete SYN. Esto detecta puertos abiertos sin completar el handshake, reduciendo el riesgo de ser detectado.

6. **¿Qué hace el flag --script?**

   `--script` permite la ejecución de scripts NSE (Nmap Scripting Engine) para realizar tareas avanzadas como detección de vulnerabilidades, escaneo de políticas de seguridad y más.

## Weaponization: Uso de Metasploit y Enumeración SSH

### Descripción de la etapa
En esta fase, utilizamos Metasploit para explotar vulnerabilidades, enfocándonos en la enumeración de usuarios SSH y la obtención de credenciales.

#### Preguntas y Respuestas

7. **Investigar el script utilizado en la enumeración de usuarios SSH (auxiliary/scanner/ssh/ssh_enumusers). ¿En qué lenguaje de programación está hecho?**

   El script está hecho en Ruby. Se utiliza para verificar la existencia de usuarios en un servidor SSH mediante respuestas específicas del servidor.

8. **Copie y pegue el código de dicho script y proporcione una explicación breve sobre su funcionamiento.**

   ```ruby
   # Ejemplo simplificado del script ssh_enumusers
   users.each do |user|
     response = ssh_check_user(user)
     if response
       print_good("Usuario encontrado: #{user}")
     else
       print_error("Usuario no encontrado: #{user}")
     end
   end